<div
  class="space-y-6 relative"
  [ngClass]="isDarkTheme ? 'text-slate-100' : 'text-slate-900'"
>
  <!-- Spinner Overlay -->
  @if (isExecutingAgents) {
  <div
    class="absolute inset-0 backdrop-blur-sm z-10 flex items-center justify-center rounded-2xl"
    [ngClass]="isDarkTheme ? 'bg-slate-900/80' : 'bg-white/90'"
  >
    <div class="flex flex-col items-center gap-4">
      <div class="relative">
        <div
          class="w-16 h-16 rounded-full border-4 border-t-transparent animate-spin"
          [ngClass]="isDarkTheme ? 'border-emerald-400' : 'border-emerald-600'"
        ></div>
        <div class="absolute inset-0 flex items-center justify-center">
          <div
            class="w-8 h-8 rounded-full animate-pulse"
            [ngClass]="isDarkTheme ? 'bg-emerald-500/20' : 'bg-emerald-600/20'"
          ></div>
        </div>
      </div>
      <p
        class="text-sm font-medium"
        [ngClass]="isDarkTheme ? 'text-slate-200' : 'text-slate-700'"
      >
        Updating cost analysis...
      </p>
    </div>
  </div>
  }

  <div class="mb-6">
    <h1
      class="text-2xl font-bold"
      [ngClass]="isDarkTheme ? 'text-white' : 'text-slate-900'"
    >
      Cost Analysis
    </h1>
    <p
      class="text-sm mt-1"
      [ngClass]="isDarkTheme ? 'text-slate-300' : 'text-slate-600'"
    >
      Financial breakdown and estimates
    </p>
  </div>

  <!-- Empty State -->
  @if (costDetails.length === 0) {
  <div
    class="flex flex-col items-center justify-center py-16 px-6"
    [ngClass]="isDarkTheme ? 'text-slate-100' : 'text-slate-900'"
  >
    <svg
      class="w-20 h-20 mb-4"
      [ngClass]="isDarkTheme ? 'text-slate-500' : 'text-slate-300'"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="1.5"
    >
      <line x1="12" y1="1" x2="12" y2="23" />
      <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" />
    </svg>
    <h3
      class="text-xl font-semibold mb-2"
      [ngClass]="isDarkTheme ? 'text-slate-100' : 'text-slate-700'"
    >
      No Cost Details Yet
    </h3>
    <p
      class="text-center max-w-md"
      [ngClass]="isDarkTheme ? 'text-slate-300' : 'text-slate-500'"
    >
      Once AI agent generates cost details, you can see it here.
    </p>
  </div>
  } @else {

  <div
    class="rounded-2xl p-6"
    [ngClass]="
      isDarkTheme
        ? 'bg-emerald-900/30 border-emerald-500/60 border-2'
        : 'bg-gradient-to-br from-emerald-50 to-teal-50 border-2 border-emerald-200'
    "
  >
    <p
      class="text-sm uppercase tracking-wider font-semibold"
      [ngClass]="isDarkTheme ? 'text-emerald-200' : 'text-emerald-700'"
    >
      Total Estimated Cost
    </p>
    <p
      class="text-4xl font-bold mt-2"
      [ngClass]="isDarkTheme ? 'text-emerald-100' : 'text-emerald-900'"
    >
      {{ totalCost }}
    </p>
  </div>

  <div class="grid gap-4">
    @for (cost of costDetails; track cost.category) {
    <div
      class="rounded-xl p-5 hover:shadow-md transition border"
      [ngClass]="
        isDarkTheme
          ? 'bg-slate-800/80 border-slate-700'
          : 'bg-white border-slate-200'
      "
    >
      <div class="flex items-start justify-between gap-4">
        <div class="flex-1">
          <h3
            class="font-semibold"
            [ngClass]="isDarkTheme ? 'text-white' : 'text-slate-900'"
          >
            {{ cost.category }}
          </h3>
          <p
            class="text-sm mt-1"
            [ngClass]="isDarkTheme ? 'text-slate-300' : 'text-slate-600'"
          >
            {{ cost.description }}
          </p>
        </div>
        <span
          class="text-lg font-bold whitespace-nowrap"
          [ngClass]="isDarkTheme ? 'text-white' : 'text-slate-900'"
        >
          {{ cost.amount }}
        </span>
      </div>
    </div>
    }
  </div>
  }
</div>
