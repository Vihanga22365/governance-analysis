<div
  class="max-w-4xl mx-auto space-y-6"
  [ngClass]="isDarkTheme ? 'text-slate-100' : 'text-slate-900'"
>
  <div class="mb-8">
    <h1
      class="text-2xl font-bold"
      [ngClass]="isDarkTheme ? 'text-white' : 'text-slate-900'"
    >
      Risk Assessment
    </h1>
    <p
      class="text-sm mt-1"
      [ngClass]="isDarkTheme ? 'text-slate-300' : 'text-slate-600'"
    >
      Current risk classification and analysis
    </p>
  </div>

  <!-- Empty State -->
  @if (!riskReason) {
  <div
    class="flex flex-col items-center justify-center py-16 px-6"
    [ngClass]="isDarkTheme ? 'text-slate-100' : 'text-slate-900'"
  >
    <svg
      class="w-20 h-20 mb-4"
      [ngClass]="isDarkTheme ? 'text-slate-500' : 'text-slate-300'"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="1.5"
    >
      <path
        d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"
      />
      <line x1="12" y1="9" x2="12" y2="13" />
      <line x1="12" y1="17" x2="12.01" y2="17" />
    </svg>
    <h3
      class="text-xl font-semibold mb-2"
      [ngClass]="isDarkTheme ? 'text-slate-100' : 'text-slate-700'"
    >
      No Risk Assessment Yet
    </h3>
    <p
      class="text-center max-w-md"
      [ngClass]="isDarkTheme ? 'text-slate-300' : 'text-slate-500'"
    >
      Once AI agent generates risk details, you can see it here.
    </p>
  </div>
  } @else {

  <!-- Risk Level Card -->
  <div
    class="rounded-2xl shadow-sm overflow-hidden"
    [ngClass]="
      isDarkTheme
        ? 'bg-slate-800/80 border border-slate-700'
        : 'bg-white border border-slate-200'
    "
  >
    <div
      class="px-6 py-4"
      [ngClass]="
        isDarkTheme
          ? 'border-b border-slate-700 bg-slate-800/60'
          : 'border-b border-slate-200 bg-slate-50'
      "
    >
      <h2
        class="text-sm font-semibold uppercase tracking-wider"
        [ngClass]="isDarkTheme ? 'text-slate-200' : 'text-slate-700'"
      >
        Risk Level
      </h2>
    </div>
    <div class="p-8 text-center">
      <div class="inline-flex items-center justify-center">
        <span
          class="text-5xl font-bold px-8 py-4 rounded-xl"
          [ngClass]="riskBadgeClass"
        >
          {{ riskLevel }}
        </span>
      </div>
    </div>
  </div>

  <!-- Reason Card -->
  <div
    class="rounded-2xl shadow-sm overflow-hidden"
    [ngClass]="
      isDarkTheme
        ? 'bg-slate-800/80 border border-slate-700'
        : 'bg-white border border-slate-200'
    "
  >
    <div
      class="px-6 py-4"
      [ngClass]="
        isDarkTheme
          ? 'border-b border-slate-700 bg-slate-800/60'
          : 'border-b border-slate-200 bg-slate-50'
      "
    >
      <h2
        class="text-sm font-semibold uppercase tracking-wider"
        [ngClass]="isDarkTheme ? 'text-slate-200' : 'text-slate-700'"
      >
        Reason
      </h2>
    </div>
    <div class="p-6">
      <div
        *ngIf="riskReasonHtml; else plainReason"
        class="leading-relaxed prose max-w-none"
        [ngClass]="
          isDarkTheme
            ? 'prose-invert text-slate-100'
            : 'text-slate-700 prose-slate'
        "
        [innerHTML]="riskReasonHtml"
      ></div>
      <ng-template #plainReason>
        <p
          class="leading-relaxed"
          [ngClass]="isDarkTheme ? 'text-slate-100' : 'text-slate-700'"
        >
          {{ riskReason }}
        </p>
      </ng-template>
    </div>
  </div>

  <!-- Quick Stats Grid -->
  <div class="grid md:grid-cols-3 gap-4 mt-8">
    <div
      class="border rounded-xl p-5 text-center transition-all hover:shadow-md"
      [ngClass]="
        riskLevel === 'Low'
          ? isDarkTheme
            ? 'border-emerald-400 bg-emerald-900/30'
            : 'border-emerald-300 bg-emerald-50'
          : isDarkTheme
          ? 'border-slate-700 bg-slate-800/70'
          : 'border-slate-200'
      "
    >
      <div
        class="inline-flex items-center justify-center w-10 h-10 rounded-full mb-3"
        [ngClass]="
          riskLevel === 'Low'
            ? isDarkTheme
              ? 'bg-emerald-800/60'
              : 'bg-emerald-100'
            : isDarkTheme
            ? 'bg-slate-700'
            : 'bg-slate-100'
        "
      >
        <svg
          class="w-5 h-5"
          [ngClass]="
            riskLevel === 'Low'
              ? isDarkTheme
                ? 'text-emerald-300'
                : 'text-emerald-600'
              : isDarkTheme
              ? 'text-slate-300'
              : 'text-slate-400'
          "
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <polyline points="20 6 9 17 4 12" />
        </svg>
      </div>
      <p
        class="text-lg font-semibold"
        [ngClass]="
          riskLevel === 'Low'
            ? isDarkTheme
              ? 'text-emerald-200'
              : 'text-emerald-900'
            : isDarkTheme
            ? 'text-slate-300'
            : 'text-slate-400'
        "
      >
        Low Risk
      </p>
    </div>

    <div
      class="border rounded-xl p-5 text-center transition-all hover:shadow-md"
      [ngClass]="
        riskLevel === 'Medium'
          ? isDarkTheme
            ? 'border-amber-400 bg-amber-900/30'
            : 'border-amber-300 bg-amber-50'
          : isDarkTheme
          ? 'border-slate-700 bg-slate-800/70'
          : 'border-slate-200'
      "
    >
      <div
        class="inline-flex items-center justify-center w-10 h-10 rounded-full mb-3"
        [ngClass]="
          riskLevel === 'Medium'
            ? isDarkTheme
              ? 'bg-amber-800/60'
              : 'bg-amber-100'
            : isDarkTheme
            ? 'bg-slate-700'
            : 'bg-slate-100'
        "
      >
        <svg
          class="w-5 h-5"
          [ngClass]="
            riskLevel === 'Medium'
              ? isDarkTheme
                ? 'text-amber-300'
                : 'text-amber-600'
              : isDarkTheme
              ? 'text-slate-300'
              : 'text-slate-400'
          "
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path
            d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"
          />
        </svg>
      </div>
      <p
        class="text-lg font-semibold"
        [ngClass]="
          riskLevel === 'Medium'
            ? isDarkTheme
              ? 'text-amber-200'
              : 'text-amber-900'
            : isDarkTheme
            ? 'text-slate-300'
            : 'text-slate-400'
        "
      >
        Medium Risk
      </p>
    </div>

    <div
      class="border rounded-xl p-5 text-center transition-all hover:shadow-md"
      [ngClass]="
        riskLevel === 'High'
          ? isDarkTheme
            ? 'border-rose-400 bg-rose-900/30'
            : 'border-rose-300 bg-rose-50'
          : isDarkTheme
          ? 'border-slate-700 bg-slate-800/70'
          : 'border-slate-200'
      "
    >
      <div
        class="inline-flex items-center justify-center w-10 h-10 rounded-full mb-3"
        [ngClass]="
          riskLevel === 'High'
            ? isDarkTheme
              ? 'bg-rose-800/60'
              : 'bg-rose-100'
            : isDarkTheme
            ? 'bg-slate-700'
            : 'bg-slate-100'
        "
      >
        <svg
          class="w-5 h-5"
          [ngClass]="
            riskLevel === 'High'
              ? isDarkTheme
                ? 'text-rose-300'
                : 'text-rose-600'
              : isDarkTheme
              ? 'text-slate-300'
              : 'text-slate-400'
          "
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <circle cx="12" cy="12" r="10" />
          <line x1="12" y1="8" x2="12" y2="12" />
          <line x1="12" y1="16" x2="12.01" y2="16" />
        </svg>
      </div>
      <p
        class="text-lg font-semibold"
        [ngClass]="
          riskLevel === 'High'
            ? isDarkTheme
              ? 'text-rose-200'
              : 'text-rose-900'
            : isDarkTheme
            ? 'text-slate-300'
            : 'text-slate-400'
        "
      >
        High Risk
      </p>
    </div>
  </div>
  }
</div>
